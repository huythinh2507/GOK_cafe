@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@{
    var sectionTitle = "GROW WITH US";
    var sectionHeading = "OUR PARTNERS";
    var buttonText = "Discover More";
    var buttonUrl = "/partners";
    var partners = new List<dynamic>();

    // Get Our Partners section from Home children
    if (UmbracoContext?.Content != null)
    {
        var homeNode = UmbracoContext.Content.GetAtRoot().FirstOrDefault(x => x.ContentType.Alias == "home" || x.ContentType.Alias == "homepage");
        if (homeNode != null)
        {
            var ourPartnersNode = homeNode.Children.FirstOrDefault(x => x.ContentType.Alias == "ourPartners");
            if (ourPartnersNode != null)
            {
                // Get section properties from parent node (if they exist)
                var tempTitle = ourPartnersNode.Value<string>("sectionTitle");
                if (!string.IsNullOrEmpty(tempTitle)) sectionTitle = tempTitle;

                var tempHeading = ourPartnersNode.Value<string>("sectionHeading");
                if (!string.IsNullOrEmpty(tempHeading)) sectionHeading = tempHeading;

                var tempButtonText = ourPartnersNode.Value<string>("buttonText");
                if (!string.IsNullOrEmpty(tempButtonText)) buttonText = tempButtonText;

                var tempButtonUrl = ourPartnersNode.Value<string>("buttonUrl");
                if (!string.IsNullOrEmpty(tempButtonUrl)) buttonUrl = tempButtonUrl;

                // Get OurPartnersItem children (up to 6 logos)
                var partnerItems = ourPartnersNode.Children.Where(x => x.ContentType.Alias == "ourPartnersItem");
                foreach (var item in partnerItems.Take(6))
                {
                    var partnerLogo = item.Value<Umbraco.Cms.Core.Models.PublishedContent.IPublishedContent>("partnerLogo");
                    var partnerLogoUrl = partnerLogo != null ? partnerLogo.Url() : "";

                    partners.Add(new
                    {
                        Name = item.Name,
                        Logo = partnerLogoUrl,
                        Url = "#"
                    });
                }
            }
        }
    }
}

<!-- Our Partners Section -->
<section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center mb-12">
            <p class="text-2xl text-primary font-medium uppercase tracking-wide mb-2">@sectionTitle</p>
            <h2 class="text-4xl md:text-5xl font-semibold text-gray-900 mb-8">@sectionHeading</h2>
        </div>

        <!-- Partners Grid -->
        @if (partners.Any())
        {
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 md:gap-6 mb-12">
                @foreach (var partner in partners)
                {
                    <div class="flex items-center justify-center hover:grayscale-0 transition-all duration-300">
                        @if (!string.IsNullOrEmpty(partner.Logo))
                        {
                            <img src="@partner.Logo" alt="@partner.Name" class="h-16 md:h-20 lg:h-20 w-auto object-contain" />
                        }
                        else
                        {
                            <div class="h-12 md:h-16 w-32 bg-gray-200 flex items-center justify-center">
                                <span class="text-gray-400 text-xs">@partner.Name</span>
                            </div>
                        }
                    </div>
                }
            </div>
        }

        <!-- Discover More Button -->
        <div class="text-center">
            <a href="@buttonUrl" class="inline-block px-8 py-3 border-2 border-primary text-primary font-semibold hover:bg-primary hover:text-white transition-all duration-300">
                @buttonText
            </a>
        </div>
    </div>
</section>
