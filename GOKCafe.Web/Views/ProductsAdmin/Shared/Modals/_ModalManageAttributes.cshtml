@*
    Manage Attributes Modal (Advanced Version)
    Shared modal for managing product type attributes with full CRUD functionality

    Used by both Create and Edit product pages
    Requires JavaScript functions:
    - openManageAttributesModal(productTypeId)
    - closeManageAttributesModal()
    - addNewAttributeField()
    - saveAllAttributes()
    - loadExistingAttributesForEditing(productTypeId)
    - renderAttributeFields()
    - renderAttributeValues(attrIndex, container)
*@

<!-- Manage Attributes Modal -->
<div id="manageAttributesModal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto">
        <!-- Modal Header -->
        <div class="p-6 border-b border-gray-200 sticky top-0 bg-white z-10">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button type="button" onclick="closeManageAttributesModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-arrow-left text-2xl"></i>
                    </button>
                    <h3 class="text-xl font-bold text-gray-800">Product Attributes</h3>
                </div>
                <button type="button" onclick="closeManageAttributesModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
        </div>

        <!-- Modal Body -->
        <div id="attributesListContent" class="p-6 space-y-4">
            <!-- Attributes will be rendered here -->
        </div>

        <!-- Modal Footer -->
        <div class="p-6 border-t border-gray-200 flex justify-between sticky bottom-0 bg-white z-10">
            <button type="button" onclick="addNewAttributeField()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium">
                + Add Attribute
            </button>
            <div class="flex space-x-3">
                <button type="button" onclick="closeManageAttributesModal()"
                    class="px-6 py-2 border border-gray-400 text-gray-700 rounded-lg hover:bg-gray-50 font-medium">
                    Cancel
                </button>
                <button type="button" onclick="saveAllAttributes()"
                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Attribute Field Template -->
<template id="attributeFieldTemplate">
    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 attribute-field-card">
        <div class="flex flex-row items-start justify-between gap-4 mb-4">
            <!-- Delete Button -->
            <button type="button" class="text-gray-700 hover:text-gray-800 delete-attribute-btn">
                <i class="fas fa-times"></i>
            </button>
            <div class="flex items-center justify-between">
                <h3 class="text-sm font-bold text-gray-700 attribute-number">Attribute 1</h3>
            </div>
        </div>

        <!-- Attribute Name Input -->
        <div class="flex flex-row items-center justify-between mb-4">
            <label class="block text-sm font-bold text-gray-700 w-24">Name</label>
            <input type="text" placeholder="e.g., Brand"
                class="attribute-name-input flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-800 font-medium">
        </div>

        <!-- Type Dropdown -->
        <div class="flex flex-row items-center justify-between mb-4">
            <label class="block text-sm font-bold text-gray-700 w-24">Type</label>
            <select class="attribute-type-select flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-700">
                <option value="Text field">Text field</option>
                <option value="Drop-down">Drop-down</option>
            </select>
        </div>

        <!-- Values Section (Expandable) - Only shown for Drop-down type -->
        <div class="attribute-values-section mt-4 pt-4 border-t border-gray-300">
            <button type="button" class="flex items-center text-blue-600 hover:text-blue-800 font-medium text-sm mb-3 toggle-values-btn">
                <i class="fas fa-chevron-down mr-2 toggle-icon"></i>
                Manage attribute values
            </button>
            <div class="values-container hidden space-y-2 bg-white p-3 rounded border border-gray-200">
                <!-- Values will be added here -->
            </div>
            <button type="button" class="text-blue-600 hover:text-blue-800 text-sm font-medium mt-2 flex items-center add-value-btn hidden">
                <i class="fas fa-plus mr-1"></i>
                Add value
            </button>
        </div>
    </div>
</template>

<!-- Attribute Value Template -->
<template id="attributeValueTemplate">
    <div class="flex items-center space-x-2 value-item">
        <input type="text" placeholder="Value" class="value-input flex-1 px-3 py-2 border border-gray-300 rounded text-sm bg-white">
        <button type="button" class="text-red-600 hover:text-red-800 delete-value-btn">
            <i class="fas fa-trash"></i>
        </button>
    </div>
</template>
