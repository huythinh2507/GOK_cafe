@using GOKCafe.Web.Models.DTOs
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@{
    Layout = "_Layout.cshtml";

    // Get Blog from ViewData (provided by controller)
    var blog = ViewData["Blog"] as BlogDto;

    // Fallback to mock data if no blog found
    if (blog == null)
    {
        blog = new BlogDto
        {
            Id = Guid.NewGuid(),
            Title = "Discovering the Aroma Trails of Da Lat Coffee Farms",
            Content = "We began by visiting smallholder farms tucked deep in the hills. These were places where generations of growers tended their crops with quiet dedication, nurturing each tree by hand. The cool mountain climate, gentle sunlight, and volcanic soil created the perfect environment for delicate Arabica varieties to thrive. We began by visiting smallholder farms tucked deep in the hills. These were places where generations of growers tended their crops with quiet dedication, nurturing each tree by hand. The cool mountain climate, gentle sunlight, and volcanic soil created the perfect environment for delicate Arabica varieties to thrive.",
            FeaturedImageUrl = "/media/image/blog-details.png",
            PublishedDate = DateTime.Now,
            Author = "GOK Cafe",
            Excerpt = "Blog excerpt..."
        };
    }

    ViewData["Title"] = blog.Title;
}

<!-- Blog Detail Section -->
<section class="py-12 bg-white">
    <div class="container mx-auto">
        <!-- Back Button -->
        <div class="mb-8">
            <a href="/blogs" class="inline-flex items-center text-primary hover:text-primary-dark transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Blog
            </a>
        </div>

        <!-- Blog Header -->
        <div class="w-full">
            <!-- Featured Image -->
            @if (!string.IsNullOrEmpty(blog.FeaturedImageUrl))
            {
                <div class="mb-8">
                    <img src="@blog.FeaturedImageUrl" alt="@blog.Title" class="w-full h-[400px] md:h-[500px] object-cover rounded-lg shadow-lg" />
                </div>
            }

            <!-- Title -->
            <h1 class="text-4xl md:text-4xl font-bold text-gray-900 mb-4">
                @blog.Title
            </h1>

            <!-- Meta Info -->
            <div class="flex items-center gap-6 text-gray-600 mb-8 pb-8 border-b border-gray-200">
                <div class="flex items-center gap-2">
                    <i class="fas fa-calendar-alt"></i>
                    <span>@blog.PublishedDate.ToString("MMMM dd, yyyy")</span>
                </div>
                <div class="flex items-center gap-2">
                    <i class="fas fa-user"></i>
                    <span>@blog.Author</span>
                </div>
            </div>

            <!-- Content -->
            <div class="prose prose-lg max-w-none">
                @Html.Raw(blog.Content)
            </div>
        </div>
    </div>
</section>
